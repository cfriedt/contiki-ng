dist: xenial

sudo: true

language:
  - c

addons:
  apt:
    packages:
      - build-essential
      - doxygen
      - git
      - curl
      - python-serial
      - srecord
      - rlwrap

script:
  - sudo sh .scripts/install-arm-ltd-toolchain.sh
  - make -C examples/${CONTIKI_PROJECT} -j$(nproc --all) TARGET=${CONTIKI_TARGET} BOARD=${CONTIKI_BOARD}

env:
  global:
    - CONTIKI_PROJECT="hello-world"
    - CONTIKI_TARGET="simplelink"
    - CONTIKI_BOARD="launchpad/cc1352r1"
    - ARMLTD_TC_VER="8-2018-q4"
    - ARMLTD_TC_VERDIR="8-2018q4"
    - ARMLTD_TC_SEVERITY="major"
    - ARMLTD_TC_OS="linux"
    - ARMLTD_TC_ARCHIVE=".tar.bz2"
    - PATH="/opt/arm/gcc-arm-none-eabi-${ARMLTD_TC_VER}-${ARMLTD_TC_SEVERITY}/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

notifications:
  email: false

#deploy:
#  - provider: releases
#    api_key: "${GH_TOKEN}"
#    file:
#      - foo.tar.xz
#    skip_cleanup: true
#    on:
#      tags: true
